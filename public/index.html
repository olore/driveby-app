<!DOCTYPE html>
<html>
  <head>
    <title>Drive By</title>
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta charset="utf-8">

        
    <!-- iPad/iPhone specific css below, add after your main css >
    <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />    
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />    
    -->

    <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->

    <link rel="stylesheet" href="app/css/jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet" href="app/css/driveby.css" />

    <script src="app/js/jquery-1.6.4.min.js"></script>

    <script>
      //listen for mobileinit before loading jqm 
      //see: http://jquerymobile.com/test/docs/api/globalconfig.html
      $(document).bind("mobileinit", function(){
        $.mobile.touchOverflowEnabled = true;
        $.mobile.defaultPageTransition = "slide";
        $.support.cors = true;
        $.mobile.allowCrossDomainPages = true;
      });
    </script>
    
    <script type="text/javascript" charset="utf-8" src="app/js/cordova-1.7.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/jquery.mobile-1.1.0.min.js"></script>

    <script type="text/javascript" charset="utf-8" src="app/js/handlebars-1.0.0.beta.4.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/jquery.timeago.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/jquery.ios-slider-0.9.1.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/driveby.js"></script>

    <script type="text/javascript">

      //jquery - for working in browser
      $(document).ready(function() {
        console.log("document.ready called, jquery ready");
        DriveBy.initialize();
      });

      //phonegap - for working in app
      function onDeviceReady() {
        console.log("ondeviceready called, phonegap ready");
        DriveBy.initialize_phonegap();
      }
      
      function onBodyLoad() {		
        console.log("onBodyLoad called");
        document.addEventListener("deviceready", onDeviceReady, false);
      }
        
    </script>

  </head>

  <body onload="onBodyLoad()">
    <div data-role="page" id="index">

      <div data-role="header" data-position="fixed">
        <h1>Drive By</h1>
      </div><!-- /header -->

      <div data-role="content">
        <div class="content-primary">

          <form id="new_post" data-ajax="false">

            <label for="state">State:</label>
      
            <div class="iosSlider">
              <div class="slider"> </div>
            </div>

            <label for="license_plate">License Plate:</label>
            <input type="text" name="license_plate" id="license_plate" value="" style="text-transform: uppercase" maxlength="8" />

            <label for="comment">Comment:</label>
            <textarea name="comment" id="comment"></textarea>

            <input id="new_post_submit" type="submit" value="Submit" />
          </form>

          <div id="recent">
            <h3>Recent submissions</h3>
            <ul id="recent-list" data-role="listview" style="position: relative">
            </ul>
          </div>
        </div>
        
      </div><!-- /content -->

      <div data-role="footer" data-id="my-footer" data-position="fixed">
        <h4>Drive Safely!</h4>
      </div><!-- /footer -->

    </div><!-- /page -->
  

    <script id="recent_posts_template" type="text/x-handlebars-template">
      <li>
        <div class="recent_submission">
          <div class="plate_image" style="background: url(app/images/{{toLowerCase post.state}}.jpg) no-repeat" />

          <p title="{{post.created_at}}" class="timeago ui-li-aside">
            {{post.created_at}}
          </p>

          <div class="plate_text_container">
            <h3 class="plate_text">
              {{post.license_plate}}
             </h3>
          </div>

          <p class="comment">
            {{post.comment}}
          </p>

        </div>
      </li>
    </script>


  </body>
</html>
