<!DOCTYPE html>
<html>
  <head>
    <title>Drive By</title>
  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta charset="utf-8">

    <!-- iPad/iPhone specific css below, add after your main css >
    <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />    
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />    
    -->

    <!-- If your application is targeting iOS BEFORE 4.0 you MUST put json2.js from http://www.JSON.org/json2.js into your www directory and include it here -->

    <link rel="stylesheet" href="app/css/jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet" href="app/css/driveby.css" />

    <script type="text/javascript" charset="utf-8" src="app/js/libraries/cordova-1.8.1.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/libraries/jquery-1.7.2.min.js"></script>

  </head>

  <body onload="onBodyLoad()">
    <div data-role="page" id="index">

      <div data-role="header" data-position="fixed">
        <h1>Drive By</h1>

        <a id="refresh" href="#" data-role="button" data-icon="refresh" class="ui-btn-right">Refresh</a>

      </div><!-- /header -->

      <div data-role="content">
        <div class="content-primary">

          <form id="new_post" data-ajax="false">

            <label for="state">Choose a state:</label>
      
            <div class="iosSlider">
              <div class="slider"> </div>
            </div>

            <label for="license_plate">License Plate:</label>
            <input type="text" name="license_plate" id="license_plate" value="" maxlength="8" autocorrect="off" required pattern="[0-9a-zA-Z\ ]{1,8}"/>

            <label for="comment">Comment:</label>
            <textarea name="comment" id="comment" required></textarea>

            <input id="new_post_submit" type="submit" value="Submit" />
          </form>

          <div id="recent">
            <h3>Recent drive bys</h3>
            <ul id="recent-list" data-role="listview"> </ul>
          </div>
        </div>
        
      </div><!-- /content -->

      <div data-role="footer" data-id="my-footer" data-position="fixed">
        <!-- <a id="fave_posts" href="#" data-role="button" data-icon="heart" class="ui-btn-left">Faves</a> -->
        <h4>Drive Safely!</h4>
        <a id="my_posts" href="my.html" data-role="button" data-icon="check" class="ui-btn-right">My</a>
      </div><!-- /footer -->

    </div><!-- /page -->
  

    <script id="recent_posts_template" type="text/x-handlebars-template">
      <li>
        <div class="recent_submission clearfix">
          <div style="float: right">
            <img class="plate_image" height="60" width="120" src="app/images/{{toLowerCase post.state}}.jpg" />

            <p title="{{post.created_at}}" class="timeago">
              {{post.created_at}}
            </p>
          </div>

          <div class="plate_text_container">
            <h3 class="plate_text {{toLowerCase post.state}}">
              {{post.license_plate}}
             </h3>
          </div>

          <p class="comment">
            {{post.comment}}
          </p>

        </div>
      </li>
    </script>


    <script type="text/javascript" charset="utf-8" src="app/js/libraries/jquery.mobile-1.1.0.min.js"></script>

    <script type="text/javascript" charset="utf-8" src="app/js/libraries/handlebars-1.0.0.beta.4.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/libraries/jquery.timeago.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/libraries/jquery.ios-slider-0.9.1.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/libraries/jquery.autoellipsis-1.0.3.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/libraries/jquery.lazyload.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/appirater_data.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/appirater.js"></script>
    <script type="text/javascript" charset="utf-8" src="app/js/driveby.js"></script>

    <script type="text/javascript">

      //listen for mobileinit before loading jqm 
      //see: http://jquerymobile.com/test/docs/api/globalconfig.html
      $(document).bind("mobileinit", function(){
        $.mobile.touchOverflowEnabled = true;
        $.mobile.defaultPageTransition = "slide";
        $.support.cors = true;
        $.mobile.allowCrossDomainPages = true;
      });
    
      //jquery - for working in browser
      $(document).ready(function() {
        if (!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)) {
          console.log("we are in a browser");
          DriveBy.initialize(); //we are in a browser
        }
      });

      //phonegap - for working in app
      function onDeviceReady() {
        console.log("we are an app");
        DriveBy.initialize_phonegap();
      }
      
      function onBodyLoad() {		
        document.addEventListener("deviceready", onDeviceReady, false);
      }
        
    </script>


  </body>
</html>
